---
layout    : post
title     : 堆的常用性质和操作
date      : 2015-05-11
category  : 算法
tags      : [数据结构]
published : true
---

堆相当于顺序存储的，满的binary-tree，通常用数组实现。堆的特点，在于常数时间找到最大/最小的节点，并在O(lgn)增加删除元素。java的LinkedList也可以实现heap，但元素的索引是通过下标进行，实际上还是数组.

<!-- more -->

# 性质

```c++
fa <= (so + 1) / 2

so <= fa * 2 + 1,  fa * 2 + 2
```

由于使用数组实现，通常预分配足够空间，另外的变量记录heap的容量

大堆，保持[fa]的key比两个[so]大

小堆，保持[fa]的key比两个[so]小

# 操作

通常不支持直接删除/添加到中间任意位置的操作。都是在头部或尾部进行，然后调整以保持性质

## 插入一个元素

由于堆是满的二叉树，而且顺序存储，所以不能在中间位置随意插入。通常应该：

1. 将堆容量增加1，在尾部新增加的这个空间，加入新元素
2. 和fa节点比较，调整位置以满足堆性质
3. 循环2

## 删除一个元素

1. 将尾部最后一个元素，复制到删除位置
2. 删除尾部元素
3. 在元删除位置调整
    - 可能要向上调，也可能向下调整
    - 如果删除位置在0，就不存在这个两难的问题

# 典型应用

## 堆排序

- 将数组堆化
- 不断将首元素和尾部元素交换，容量也随之减小，去除的顺序就是元素依次排序

## 数据流中位数

数据顺序、流式依次得到，求每次加入新数据后，所有得到数据的中位数。

- 建立两个堆，一个大一个小，大堆保存较小的一半数据，小堆保存交大的一半数据。
- 总体为奇数个数据时，大堆容量可以多出一个，偶数时保持相等
- fetch到新数据时，根据大小push到对应的堆中去，然后根据个数决定是否要pop一个到另外一个堆中去。
- 中位数就总是大堆的堆顶，第0个元素

blah...看代码吧


# 其他的堆

[二项堆](http://dl.acm.org/citation.cfm?id=359478)


