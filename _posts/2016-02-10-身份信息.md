---
layout    : post  
title     : 身份信息  
date      : 2016-02-10  
category  : 使用配置  
tags      : [提取信息]  
published : true  
---

从实名制火车票中推测身份信息

<!-- more -->

# 身份证号码

现在的身份证号码为18位

[1  --  6] [7  --  14] [15  --  16  --  17] [18]
   地址码     出生日期     同生日顺序码 (性别)   校验

性别码，男性为奇数

# 校验码

校验码计算方法

1. 将身份证号标记为,从地址码一侧开始: $[ a_{18}, a_{17}, … , a_{2}, a_{1} ]$
2. 计算权重系数: $[ W_{i} = 2^{i - 1} \% 11 ]$

        i   18  17  16  15  14  13  12  11  10  9   8   7   6   5   4   3   2   1
        Wi  7   9   10  5   8   4   2   1   6   3   7   9   10  5   8   4   2   1

3. 计算 $[ S = a_{18} * W_{18} + a_{17} * W_{17} + … + a_{2} * W_{2} ]$
4. $[ a_{1} = (12 - (S \% 11)) \% 11 ]$  如果结果是10，用X表示

```C
bool check(char id[]){
    int i, sum, n;
    for (sum = i = 0; i < 17; i++)
        sum += ((1 &lt;&lt; (17 - i)) % 11) * (id[i] - '0');
    n = (12 - (sum % 11)) % 11;
    if (n &lt; 10)
        return (n == id[17] - '0');
    else
        return (id[17] == 'X');
}
```
